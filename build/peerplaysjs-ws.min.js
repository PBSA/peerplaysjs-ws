!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.t=t();else if("function"==typeof define&&define.i)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).s=t()}}(function(){return function r(o,c,h){function u(i,t){if(!c[i]){if(!o[i]){var n="function"==typeof require&&require;if(!t&&n)return n(i,!0);if(a)return a(i,!0);var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}var s=c[i]={t:{}};o[i][0].call(s.t,function(t){return u(o[i][1][t]||t)},s,s.t,r,o,c,h)}return c[i].t}for(var a="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,i,n){"use strict";n.o=!0;var e=o(t("./ChainWebSocket")),s=o(t("./GrapheneApi")),r=o(t("./ChainConfig"));function o(t){return t&&t.o?t:{default:t}}var c=void 0;n.default={h:function(t){this.u=t,c&&c.h(t)},reset:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",i=arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3;return c&&(c.close(),c=null),(c=new h).h(this.u),c&&i&&c.connect(t,n),c},l:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",i=arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4e3;return c||(c=new h).h(this.u),c&&i&&c.connect(t,n),c},p:function(){return Apis.l().m},close:function(){c&&(c.close(),c=null)}};var h=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.connect=function(i,t){var n=this;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&i.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this._=new e.default(i,this.u,t),this.v=this._.C("","").then(function(){console.log("Connected to API node:",i),n.T=new s.default(n._,"database"),n.k=new s.default(n._,"network_broadcast"),n.S=new s.default(n._,"history"),n.O=new s.default(n._,"crypto"),n.P=new s.default(n._,"bookie");var t=n.T.init().then(function(){return n.T.exec("get_chain_id",[]).then(function(t){return n.m=t,r.default.W(t)})});return n._.g=function(){n._.C("","").then(function(){n.T.init().then(function(){n.u&&n.u(e.default.status.N)}),n.k.init(),n.S.init(),n.O.init(),n.P.init()})},Promise.all([t,n.k.init(),n.S.init(),n.O.init().catch(function(t){return console.error("ApiInstance\tCrypto API Error",t)}),n.P.init()])})},t.prototype.close=function(){this._&&this._.close(),this._=null},t.prototype.G=function(){return this.T},t.prototype.A=function(){return this.k},t.prototype.R=function(){return this.S},t.prototype.D=function(){return this.O},t.prototype.I=function(){return this.P},t.prototype.h=function(t){this.u=t},t}();i.t=n.default},{q:2,H:3,J:4}],2:[function(t,i,n){(function(t){"use strict";n.o=!0;var o=void 0,c={U:t.F.B||"GPH"};o={M:"CORE",U:"GPH",j:15,L:86400,Y:86400,V:{K:{M:"BTS",U:"BTS",m:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},X:{M:"MUSE",U:"MUSE",m:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},Z:{M:"TEST",U:"TEST",m:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},$:{M:"GOV",U:"FEW",m:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"},tt:{M:"PPY",U:"PPY",m:"594e284d3c733afaaa34a5e99a39edb31e5192fab023101d691d952034902237"}},W:function(t){var i,n,e=void 0,s=void 0,r=void 0;for(e=0,i=(n=Object.keys(o.V)).length;e<i;e++)if(r=n[e],(s=o.V[r]).m===t)return o.it=r,s.U&&(o.U=s.U,c.U=s.U),{it:r,nt:s};o.it||console.log("Unknown chain id (this may be a testnet)",t)},reset:function(){o.M="CORE",o.U="GPH",c.U="GPH",o.j=15,o.L=86400,console.log("Chain config reset")},et:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"GPH";o.U=t,c.U=t}},n.default=o,i.t=n.default}).call(this,t("_process"))},{st:5}],3:[function(t,i,n){"use strict";n.o=!0;var r=["set_subscribe_callback","subscribe_to_market","broadcast_transaction_with_callback","set_pending_transaction_callback"],o=["unsubscribe_from_market","unsubscribe_from_accounts"],e=function(){function e(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e4;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.u=i,this.rt=t,this.ot=n,this.connected=!1,this.ct=null,this.g=null,this.ht=0,this.ut={},this.at={},this.ft={},this.lt=null,this.dt=null,this.wt=null,this.status=e.status,this.bt=this.bt.bind(this),this.pt=this.pt.bind(this),this._t=this._t.bind(this),this.vt=this.vt.bind(this),this.Ct=this.Ct.bind(this),this.Tt=this.Tt.bind(this),this.kt=this.kt.bind(this),this.listener=this.listener.bind(this),this.Tt()}return e.prototype.Tt=function(){this.debug("!!! ChainWebSocket create connection"),this.ct=null,this.Et||(this.Et=new Promise(this.kt));try{this.St=new WebSocket(this.rt)}catch(t){return this.yt()}this.Ot(),this.Pt=setTimeout(this.Ct,this.ot)},e.prototype.yt=function(){clearTimeout(this.Pt),this.Pt=null,clearTimeout(this.wt),this.wt=null,this.connected=!1,this.St&&(this.Wt(),this.St.close()),this.ct||(this.debug("!!! ChainWebSocket reset connection",this.ot),this.ct=setTimeout(this.Tt,this.ot)),this.dt&&this.dt(new Error("Connection attempt failed: "+this.rt))},e.prototype.Ot=function(){this.debug("!!! ChainWebSocket add event listeners"),this.St.addEventListener("open",this.bt),this.St.addEventListener("close",this.pt),this.St.addEventListener("error",this.vt),this.St.addEventListener("message",this.listener)},e.prototype.Wt=function(){this.debug("!!! ChainWebSocket remove event listeners"),this.St.removeEventListener("open",this.bt),this.St.removeEventListener("close",this.pt),this.St.removeEventListener("error",this.vt),this.St.removeEventListener("message",this.listener)},e.prototype.kt=function(t,i){this.debug("!!! ChainWebSocket createPromise"),this.lt=t,this.dt=i},e.prototype.bt=function(){this.debug("!!! ChainWebSocket Connected "),this.connected=!0,clearTimeout(this.Pt),this.Pt=null,this.g&&this.g(),this.lt&&this.lt(),this.u&&this.u(e.status.OPEN)},e.prototype.Ct=function(){this.debug("!!! ChainWebSocket timeout"),this.pt(new Error("Connection timed out."))},e.prototype._t=function(){this.debug("!!! ChainWebSocket terminate"),this.pt(new Error("Connection was terminated."))},e.prototype.pt=function(t){this.debug("!!! ChainWebSocket Close ",t),this.yt(),this.u&&this.u(e.status.CLOSED)},e.prototype.vt=function(t){this.debug("!!! ChainWebSocket On Connection Error ",t),this.yt(),this.u&&this.u(e.status.ERROR)},e.prototype.call=function(t){var n=this;if(!this.connected)return this.debug("!!! ChainWebSocket Call not connected. "),Promise.reject(new Error("Disconnected from the BlockChain."));this.debug("!!! ChainWebSocket Call connected. ",t);var e={method:t[1],gt:t,id:this.ht+1};if(this.ht=e.id,r.includes(e.method)&&(this.at[e.id]={xt:e.gt[2][0]},e.gt[2][0]=e.id),o.includes(e.method)){if("function"!=typeof e.gt[2][0])throw new Error("First parameter of unsub must be the original callback");var i=e.gt[2].splice(0,1)[0];for(var s in this.at)if(this.at[s].xt===i){this.ft[e.id]=s;break}}return this.wt||(this.wt=setTimeout(this._t.bind(this),1e4)),new Promise(function(t,i){n.ut[e.id]={time:new Date,resolve:t,reject:i},e.method="call";try{n.St.send(JSON.stringify(e))}catch(t){n.debug("Caught a nasty error : ",t)}})},e.prototype.listener=function(i){var n=null;try{n=JSON.parse(i.data)}catch(t){n.error="Error parsing response: "+t.stack,this.debug("Error parsing response: ",i)}this.wt&&(clearTimeout(this.wt),this.wt=null);var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.gt[0]),(e=t?this.at[n.id].xt:this.ut[n.id])&&!t?(n.error?(this.debug("----\x3e responseJSON : ",n),e.reject(n.error)):e.resolve(n.result),delete this.ut[n.id],this.ft[n.id]&&(delete this.at[this.ft[n.id]],delete this.ft[n.id])):e&&t?e(n.gt[1]):this.debug("Warning: unknown websocket responseJSON: ",n)},e.prototype.C=function(t,i){var n=this;return this.debug("!!! ChainWebSocket login.",t,i),this.Et.then(function(){return n.call([1,"login",[t,i]])})},e.prototype.close=function(){console.log("CLOSE IS FIRED!"),this.St&&(this.Wt(),this.St.close(),this.St=null),clearTimeout(this.Pt),this.Pt=null,clearTimeout(this.wt),this.wt=null,clearTimeout(this.ct),this.ct=null,this.connected=!1},e.prototype.debug=function(){0},e}();e.status={N:"reconnected",OPEN:"open",CLOSED:"closed",ERROR:"error"},n.default=e,i.t=n.default},{}],4:[function(t,i,n){"use strict";n.o=!0;var e=function(){function n(t,i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,n),this._=t,this.Nt=i}return n.prototype.init=function(){var i=this;return this._.call([1,this.Nt,[]]).then(function(t){return i.Gt=t,i})},n.prototype.exec=function(i,n){return this._.call([this.Gt,i,n]).catch(function(t){throw console.log("!!! GrapheneApi error: ",i,n,t,JSON.stringify(t)),t})},n}();n.default=e,i.t=n.default},{}],5:[function(t,i,n){var e,s,r=i.t={};function o(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function h(i){if(e===setTimeout)return setTimeout(i,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(i,0);try{return e(i,0)}catch(t){try{return e.call(null,i,0)}catch(t){return e.call(this,i,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(t){s=c}}();var u,a=[],f=!1,l=-1;function d(){f&&u&&(f=!1,u.length?a=u.concat(a):l=-1,a.length&&w())}function w(){if(!f){var t=h(d);f=!0;for(var i=a.length;i;){for(u=a,a=[];++l<i;)u&&u[l].At();l=-1,i=a.length}u=null,f=!1,function(i){if(s===clearTimeout)return clearTimeout(i);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(i);try{s(i)}catch(t){try{return s.call(null,i)}catch(t){return s.call(this,i)}}}(t)}}function b(t,i){this.Rt=t,this.Dt=i}function p(){}r.It=function(t){var i=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];a.push(new b(t,i)),1!==a.length||f||h(w)},b.prototype.At=function(){this.Rt.apply(null,this.Dt)},r.title="browser",r.qt=!0,r.F={},r.Ht=[],r.version="",r.Jt={},r.Ut=p,r.addListener=p,r.Bt=p,r.Ft=p,r.removeListener=p,r.Mt=p,r.jt=p,r.Lt=p,r.Yt=p,r.Vt=function(t){return[]},r.zt=function(t){throw new Error("process.binding is not supported")},r.Kt=function(){return"/"},r.Qt=function(t){throw new Error("process.chdir is not supported")},r.Xt=function(){return 0}},{}]},{},[1])(1)});