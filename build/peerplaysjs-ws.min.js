!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function n(e,t,i){function o(c,s){if(!t[c]){if(!e[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var a=t[c]={t:{}};e[c][0].call(a.t,function(n){var t=e[c][1][n];return o(t||n)},a,a.t,n,e,t,i)}return t[c].t}for(var r="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,e,t){"use strict";function i(n){return n&&n.s?n:{default:n}}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.s=!0;var r=i(n("./ChainWebSocket")),c=i(n("./GrapheneApi")),s=i(n("./ChainConfig")),u=void 0;t.default={u:function(n){this.h=n,u&&u.u(n)},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return u&&(u.close(),u=null),(u=new f).u(this.h),u&&e&&u.connect(n,t),u},l:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",e=arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return u||(u=new f).u(this.h),u&&e&&u.connect(n,t),u},p:function(){return Apis.l().v},close:function(){u&&(u.close(),u=null)}};var f=function(){function n(){o(this,n)}return n.prototype.connect=function(n,e){var t=this;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.m=new r.default(n,this.h,e),this._=this.m.k("","").then(function(){console.log("Connected to API node:",n),t.S=new c.default(t.m,"database"),t.T=new c.default(t.m,"network_broadcast"),t.g=new c.default(t.m,"history"),t.W=new c.default(t.m,"crypto"),t.C=new c.default(t.m,"bookie");var e=t.S.init().then(function(){return t.S.exec("get_chain_id",[]).then(function(n){return t.v=n,s.default.P(n)})});return t.m.R=function(){t.m.k("","").then(function(){t.S.init().then(function(){t.h&&t.h("reconnect")}),t.T.init(),t.g.init(),t.W.init(),t.C.init()})},Promise.all([e,t.T.init(),t.g.init(),t.W.init().catch(function(n){return console.error("ApiInstance\tCrypto API Error",n)}),t.C.init()])})},n.prototype.close=function(){this.m&&this.m.close(),this.m=null},n.prototype.O=function(){return this.S},n.prototype.A=function(){return this.T},n.prototype.I=function(){return this.g},n.prototype.G=function(){return this.W},n.prototype.N=function(){return this.C},n.prototype.u=function(n){this.h=n},n}();e.t=t.default},{U:2,q:3,D:4}],2:[function(n,e,t){(function(n){"use strict";t.s=!0;var i=void 0,o={H:n.j.M||"GPH"};i={B:"CORE",H:"GPH",F:15,J:86400,L:86400,V:{Y:{B:"BTS",H:"BTS",v:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},K:{B:"MUSE",H:"MUSE",v:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},X:{B:"TEST",H:"TEST",v:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},Z:{B:"GOV",H:"FEW",v:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"},$:{B:"PPY",H:"PPY",v:"c15e61542f9b5c24237b6e0c2474be840e1621c8a81683eeca8bc19d533d470e"}},P:function(n){var e=void 0,t=void 0,r=void 0,c=void 0,s=void 0;for(e=0,t=(s=Object.keys(i.V)).length;e<t;e++)if(c=s[e],(r=i.V[c]).v===n)return i.nn=c,r.H&&(i.H=r.H,o.H=r.H),{nn:c,en:r};i.nn||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.B="CORE",i.H="GPH",o.H="GPH",i.F=15,i.J=86400,console.log("Chain config reset")},tn:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.H=n,o.H=n}},t.default=i,e.t=t.default}).call(this,n("_process"))},{in:7}],3:[function(n,e,t){(function(i){"use strict";function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.s=!0;var r=void 0;r="undefined"!=typeof WebSocket||i.j.on?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?n("ReconnectingWebSocket"):WebSocket:n("ws");var c=function(){function n(e,t){var i=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;o(this,n),this.h=t,this.rn=setTimeout(function(){i.cn&&i.cn(new Error("Connection attempt timed out: "+e))},c);try{this.sn=new r(e)}catch(n){console.error("invalid websocket URL:",n,e),this.sn=new r("wss://127.0.0.1:8090")}this.sn.un=5e3,this.cn=null,this.R=null,this.fn=new Promise(function(n,e){i.cn=e,i.sn.onopen=function(){clearTimeout(i.rn),i.h&&i.h("open"),i.R&&i.R(),n()},i.sn.onerror=function(n){clearTimeout(i.rn),i.h&&i.h("error"),i.cn&&i.cn(n)},i.sn.onmessage=function(n){return i.listener(JSON.parse(n.data))},i.sn.onclose=function(){i.h&&i.h("closed")}}),this.an=0,this.hn={},this.dn={},this.ln={}}return n.prototype.call=function(n){var e=this,t=n[1];if(this.an+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t||(this.dn[this.an]={bn:n[2][0]},n[2][0]=this.an),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this.dn)if(this.dn[o].bn===i){this.ln[this.an]=o;break}}var r={method:"call",wn:n};return r.id=this.an,new Promise(function(n,t){e.hn[e.an]={time:new Date,resolve:n,reject:t},e.sn.onerror=function(n){console.log("!!! ChainWebSocket Error ",n),t(n)},e.sn.send(JSON.stringify(r))})},n.prototype.listener=function(n){var e=!1,t=null;"notice"===n.method&&(e=!0,n.id=n.wn[0]),(t=e?this.dn[n.id].bn:this.hn[n.id])&&!e?(n.error?t.reject(n.error):t.resolve(n.result),delete this.hn[n.id],this.ln[n.id]&&(delete this.dn[this.ln[n.id]],delete this.ln[n.id])):t&&e?t(n.wn[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.k=function(n,e){var t=this;return this.fn.then(function(){return t.call([1,"login",[n,e]])})},n.prototype.close=function(){this.sn.close()},n}();t.default=c,e.t=t.default}).call(this,n("_process"))},{pn:5,in:7,sn:6}],4:[function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.s=!0;var o=function(){function n(e,t){i(this,n),this.m=e,this.vn=t}return n.prototype.init=function(){var n=this;return this.m.call([1,this.vn,[]]).then(function(e){return n.mn=e,n})},n.prototype.exec=function(n,e){return this.m.call([this.mn,n,e]).catch(function(t){throw console.log("!!! GrapheneApi error: ",n,e,t,JSON.stringify(t)),t})},n}();t.default=o,e.t=t.default},{}],5:[function(n,e,t){!function(n,t){void 0!==e&&e.t?e.t=t():n.pn=t()}(this,function(){function n(e,t,i){function o(n,e){var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}var r={debug:!1,_n:!0,kn:1e3,Sn:3e4,Tn:1.5,un:2e3,yn:null,binaryType:"blob"};i||(i={});for(var c in r)void 0!==i[c]?this[c]=i[c]:this[c]=r[c];this.url=e,this.gn=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,u=this,f=!1,a=!1,h=null,d=document.createElement("div");d.addEventListener("open",function(n){u.onopen(n)}),d.addEventListener("close",function(n){u.onclose(n)}),d.addEventListener("connecting",function(n){u.Wn(n)}),d.addEventListener("message",function(n){u.onmessage(n)}),d.addEventListener("error",function(n){u.onerror(n)}),this.addEventListener=d.addEventListener.bind(d),this.removeEventListener=d.removeEventListener.bind(d),this.dispatchEvent=d.dispatchEvent.bind(d),this.open=function(e){if(s=new WebSocket(u.url,t||[]),s.binaryType=this.binaryType,e){if(this.yn&&this.gn>this.yn)return}else d.dispatchEvent(o("connecting")),this.gn=0;(u.debug||n.En)&&console.debug("ReconnectingWebSocket","attempt-connect",u.url);var i=s,r=setTimeout(function(){(u.debug||n.En)&&console.debug("ReconnectingWebSocket","connection-timeout",u.url),a=!0,i.close(),a=!1},u.un);s.onopen=function(t){clearTimeout(r),(u.debug||n.En)&&console.debug("ReconnectingWebSocket","onopen",u.url),u.protocol=s.protocol,u.readyState=WebSocket.OPEN,u.gn=0;var i=o("open");i.Cn=e,e=!1,d.dispatchEvent(i)},s.onclose=function(t){if(clearTimeout(r),s=null,f)u.readyState=WebSocket.CLOSED,d.dispatchEvent(o("close"));else{u.readyState=WebSocket.CONNECTING;var i=o("connecting");i.code=t.code,i.reason=t.reason,i.wasClean=t.wasClean,d.dispatchEvent(i),e||a||((u.debug||n.En)&&console.debug("ReconnectingWebSocket","onclose",u.url),d.dispatchEvent(o("close")));var r=u.kn*Math.pow(u.Tn,u.gn);h=setTimeout(function(){u.gn++,u.open(!0)},r>u.Sn?u.Sn:r)}},s.onmessage=function(e){(u.debug||n.En)&&console.debug("ReconnectingWebSocket","onmessage",u.url,e.data);var t=o("message");t.data=e.data,d.dispatchEvent(t)},s.onerror=function(e){(u.debug||n.En)&&console.debug("ReconnectingWebSocket","onerror",u.url,e),d.dispatchEvent(o("error"))}},1==this._n&&this.open(!1),this.send=function(e){if(s)return(u.debug||n.En)&&console.debug("ReconnectingWebSocket","send",u.url,e),s.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,e){void 0===n&&(n=1e3),f=!0,s&&s.close(n,e),h&&(clearTimeout(h),h=null)},this.refresh=function(){s&&s.close()}}if("undefined"!=typeof window&&"WebSocket"in window)return n.prototype.onopen=function(n){},n.prototype.onclose=function(n){},n.prototype.Wn=function(n){},n.prototype.onmessage=function(n){},n.prototype.onerror=function(n){},n.En=!1,n.CONNECTING=WebSocket.CONNECTING,n.OPEN=WebSocket.OPEN,n.CLOSING=WebSocket.CLOSING,n.CLOSED=WebSocket.CLOSED,n})},{}],6:[function(n,e,t){},{}],7:[function(n,e,t){function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(n){if(h===setTimeout)return setTimeout(n,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(n,0);try{return h(n,0)}catch(e){try{return h.call(null,n,0)}catch(e){return h.call(this,n,0)}}}function c(n){if(d===clearTimeout)return clearTimeout(n);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(n);try{return d(n)}catch(e){try{return d.call(null,n)}catch(e){return d.call(this,n)}}}function s(){p&&b&&(p=!1,b.length?w=b.concat(w):v=-1,w.length&&u())}function u(){if(!p){var n=r(s);p=!0;for(var e=w.length;e;){for(b=w,w=[];++v<e;)b&&b[v].Pn();v=-1,e=w.length}b=null,p=!1,c(n)}}function f(n,e){this.Rn=n,this.xn=e}function a(){}var h,d,l=e.t={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(n){h=i}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(n){d=o}}();var b,w=[],p=!1,v=-1;l.On=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];w.push(new f(n,e)),1!==w.length||p||r(u)},f.prototype.Pn=function(){this.Rn.apply(null,this.xn)},l.title="browser",l.on=!0,l.j={},l.An=[],l.version="",l.In={},l.Gn=a,l.addListener=a,l.Nn=a,l.Un=a,l.removeListener=a,l.qn=a,l.Dn=a,l.Hn=a,l.Mn=a,l.jn=function(n){return[]},l.Bn=function(n){throw new Error("process.binding is not supported")},l.Fn=function(){return"/"},l.Jn=function(n){throw new Error("process.chdir is not supported")},l.Ln=function(){return 0}},{}]},{},[1])(1)});